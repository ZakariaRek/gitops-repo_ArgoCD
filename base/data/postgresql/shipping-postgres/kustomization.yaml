apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: shipping-postgres
  namespace: data

resources:
  - Configmap.yaml
  - Secret.yaml
  - StatefulSet.yaml
  - Service.yaml
  - HPA.yaml
  - Init-ConfigMap.yaml  # Add the initialization ConfigMap

labels:
  - pairs:
      app: shipping-postgres
      component: data
      service: shipping-service
      tier: database
      version: "16-alpine"

images:
  - name: postgres
    newTag: 16-alpine

namespace: data

replicas:
  - name: shipping-postgres
    count: 1