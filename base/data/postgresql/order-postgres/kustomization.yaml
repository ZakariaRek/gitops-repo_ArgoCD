apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: order-postgres
  namespace: data

resources:    # Optional: Remove if using dynamic provisioning
  - Configmap.yaml
  - StatefulSet.yaml  # Changed from Deployment.yaml
  - Secret.yaml
  - Service.yaml
  # Removed Pvc.yaml - StatefulSet manages its own volume claims

labels:
  - pairs:
      app: order-postgres
      component: data
      service: order-service
      tier: database
      version: "15.4"

images:
  - name: postgres
    newTag: 15.4-alpine

namespace: data

replicas:
  - name: order-postgres
    count: 1