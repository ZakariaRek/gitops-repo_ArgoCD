apiVersion: v1
kind: ConfigMap
metadata:
  name: zookeeper-config
  namespace: data
  labels:
    app: zookeeper
    component: data
data:
  zoo.cfg: |
    # Basic Zookeeper Configuration
    tickTime=2000
    initLimit=10
    syncLimit=5
    dataDir=/var/lib/zookeeper/data
    dataLogDir=/var/lib/zookeeper/logs
    clientPort=2181
    maxClientCnxns=60
    
    # Standalone mode (for single instance)
    # server.1=zookeeper-service:2888:3888
    
    # Admin Server Configuration
    admin.enableServer=false
    
    # Log Configuration
    autopurge.snapRetainCount=3
    autopurge.purgeInterval=1
    
    # Performance Tuning
    preAllocSize=65536
    snapCount=100000
    
    # Security (basic configuration)
    requireClientAuthScheme=

  log4j.properties: |
    # Log4j Configuration for Zookeeper
    log4j.rootLogger=INFO, CONSOLE, ROLLINGFILE
    
    log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
    log4j.appender.CONSOLE.Threshold=INFO
    log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
    log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} [myid:%X{myid}] - %-5p [%t:%C{1}@%L] - %m%n
    
    log4j.appender.ROLLINGFILE=org.apache.log4j.RollingFileAppender
    log4j.appender.ROLLINGFILE.Threshold=DEBUG
    log4j.appender.ROLLINGFILE.File=/var/lib/zookeeper/logs/zookeeper.log
    log4j.appender.ROLLINGFILE.MaxFileSize=10MB
    log4j.appender.ROLLINGFILE.MaxBackupIndex=10
    log4j.appender.ROLLINGFILE.layout=org.apache.log4j.PatternLayout
    log4j.appender.ROLLINGFILE.layout.ConversionPattern=%d{ISO8601} [myid:%X{myid}] - %-5p [%t:%C{1}@%L] - %m%n
