# base/data/kafka/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: kafka
  namespace: data

resources:
  - Deployment.yaml
  - Service.yaml
  - ConfigMap.yaml
  - PersistentVolumeClaim.yaml

labels:
  - pairs:
      app: kafka
      component: data
      version: "7.4.0"

images:
  - name: confluentinc/cp-kafka
    newTag: 7.4.0

namespace: data

replicas:
  - name: kafka
    count: 1

configMapGenerator:
  - name: kafka-env-config
    literals:
      - KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
      - KAFKA_LOG_RETENTION_HOURS=168
      - KAFKA_DEFAULT_REPLICATION_FACTOR=1