apiVersion: v1
kind: ConfigMap
metadata:
  name: user-mongodb-config
  namespace: data
  labels:
    app: user-mongodb
    component: data
    service: user-service
data:
  database-name: "userdb"
  mongodb-url: "mongodb://user-mongodb-headless.data.svc.cluster.local:27017/userdb"

  # MongoDB configuration file
  mongod.conf: |
      storage:
        dbPath: /data/db
        journal:
          enabled: true
        wiredTiger:
          engineConfig:
            cacheSizeGB: 0.25
      systemLog:
        destination: file
        logAppend: true
        path: /var/log/mongodb/mongod.log
        logRotate: reopen
      net:
        port: 27017
        bindIp: 0.0.0.0
        maxIncomingConnections: 100
      processManagement:
        timeZoneInfo: /usr/share/zoneinfo
      replication:
        replSetName: "user-replica-set"
      security:
        authorization: enabled