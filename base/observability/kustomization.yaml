apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: observability-stack
  namespace: observability

resources:
  - namespace.yaml
  - prometheus  # Add Prometheus
  - grafana     # Add Grafana
  - elk
  - Kiali

labels:
  - pairs:
      component: observability
      managed-by: argocd
      platform: nexus-commerce

namespace: observability

# Common configurations for the entire observability stack
configMapGenerator:
  - name: observability-common-config
    literals:
      - CLUSTER_NAME=nexus-commerce
      - ENVIRONMENT=base
      - LOG_LEVEL=INFO
      - PROMETHEUS_URL=http://prometheus.observability.svc.cluster.local:9090
      - GRAFANA_URL=http://grafana.observability.svc.cluster.local:3000
      - KIALI_URL=http://kiali.observability.svc.cluster.local:20001

---