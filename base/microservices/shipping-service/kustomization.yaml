apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: shipping-service
  namespace: microservices

resources:
  - ConfigMap.yaml
  - Secret.yaml
  - Deployment.yaml
  - Service.yaml

labels:
  - pairs:
      app: shipping-service
      component: microservices
      tier: backend
      version: "2.0.0"

namespace: microservices

images:
  - name: yahyazakaria123/ecommerce-app-shipping-service
    newTag: latest

replicas:
  - name: shipping-service
    count: 1

# Add annotations for better management
patches:
  - patch: |-
      - op: add
        path: /metadata/annotations
        value:
          app.kubernetes.io/name: shipping-service
          app.kubernetes.io/instance: shipping-service-instance
          app.kubernetes.io/version: "2.0.0"
          app.kubernetes.io/component: shipping-logistics
          app.kubernetes.io/part-of: ecommerce-platform
          app.kubernetes.io/managed-by: kustomize
    target:
      group: apps
      version: v1
      kind: Deployment
      name: shipping-service